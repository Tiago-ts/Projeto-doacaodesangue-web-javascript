{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tiago Silva\\\\Documents\\\\GitHub\\\\Projeto-doacaodesangue-web-javascript\\\\Projeto-Doacao\\\\clientside\\\\src\\\\components\\\\NewPost.js\";\nimport React, { useState } from 'react';\nimport { Content } from './Styles/NewPost';\nimport { uploadImage, sendPost } from './functions/UserFunctions';\nexport const NewPost = user => {\n  const [imageUploadedApi, setImage] = useState('');\n  const [imageUploaded, setimageUploaded] = useState('');\n  const [description, setDescription] = useState('');\n\n  const onChange = e => {\n    const text = document.getElementById('inputpost');\n    text.style.height = 'auto';\n    text.style.height = text.scrollHeight + 'px';\n    setDescription(e.currentTarget.value);\n  };\n\n  const onChangeInput = e => {\n    if (!e.target.files[0]) return;\n    const formData = new FormData();\n    formData.append('image', e.target.files[0]);\n    setImage(formData);\n    setimageUploaded(URL.createObjectURL(e.target.files[0]));\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    uploadImage(imageUploadedApi).then(response => {\n      if (response.status === 200) {\n        sendPost({\n          description: description,\n          imageContent: response.data.link,\n          deletehash: response.data.deletehash\n        }, localStorage.token).then(res => {\n          if (res) {\n            setimageUploaded('');\n            setImage('');\n            setDescription('');\n            document.getElementById('inputPosts').value = '';\n          }\n        });\n        return true;\n      }\n\n      window.alert('Erro ao realizar o upload');\n      console.log(response, 'repso');\n    });\n  };\n\n  return React.createElement(Content, {\n    image: user.image,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"postinput\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"profileinput\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"profileInfoinput\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"imginput\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, user.name)), React.createElement(\"div\", {\n    className: \"confirm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    form: \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Postar\"))), React.createElement(\"form\", {\n    className: \"contentPostinput\",\n    id: \"form\",\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"textarea\", {\n    onChange: onChange,\n    id: \"inputpost\",\n    value: description,\n    placeholder: \"Digite uma descri\\xE7\\xE3o!\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    id: \"inputPosts\",\n    type: \"file\",\n    onChange: onChangeInput,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), imageUploaded ? React.createElement(\"div\", {\n    className: \"imgPostinput\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: imageUploaded,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })) : null)));\n};","map":{"version":3,"sources":["C:/Users/Tiago Silva/Documents/GitHub/Projeto-doacaodesangue-web-javascript/Projeto-Doacao/clientside/src/components/NewPost.js"],"names":["React","useState","Content","uploadImage","sendPost","NewPost","user","imageUploadedApi","setImage","imageUploaded","setimageUploaded","description","setDescription","onChange","e","text","document","getElementById","style","height","scrollHeight","currentTarget","value","onChangeInput","target","files","formData","FormData","append","URL","createObjectURL","onSubmit","preventDefault","then","response","status","imageContent","data","link","deletehash","localStorage","token","res","window","alert","console","log","image","name"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Content } from './Styles/NewPost';\nimport { uploadImage, sendPost } from './functions/UserFunctions';\nexport const NewPost= (user) =>{\n    const [imageUploadedApi, setImage] = useState('');\n    const [imageUploaded, setimageUploaded] = useState('');\n    const [description , setDescription] = useState('');\n    \n    const onChange = (e)=>{\n        const text = document.getElementById('inputpost');\n            text.style.height = 'auto';\n            text.style.height = text.scrollHeight+'px';\n            setDescription(e.currentTarget.value)\n    }\n    const onChangeInput = (e)=>{\n            if(!e.target.files[0])\n            return;\n                 const formData = new FormData();\n                 formData.append('image',e.target.files[0]);\n                 setImage(formData);\n                 setimageUploaded(URL.createObjectURL(e.target.files[0]))\n             \n    }\n    const onSubmit =(e)=>{\n        e.preventDefault()\n        uploadImage(imageUploadedApi).then(response=>{\n            if(response.status === 200){\n                sendPost({\n                    description: description,\n                    imageContent: response.data.link,\n                    deletehash: response.data.deletehash\n                },localStorage.token).then(res =>{\n                    if(res){\n                        setimageUploaded('');\n                        setImage('');\n                        setDescription('');\n                        document.getElementById('inputPosts').value = '';\n                    }\n\n                })\n               return  true;\n            }\n            window.alert('Erro ao realizar o upload')\n            console.log(response, 'repso')\n        })\n       \n    }\n    return(\n        <Content image={user.image}>\n        <div className=\"postinput\">\n            <div className=\"profileinput\">\n                <div className=\"profileInfoinput\">\n                    <div className=\"imginput\">\n                    </div>\n                    <p>{user.name}</p>\n                   \n                </div>\n                <div className = 'confirm'>\n                    <button type='submit' form=\"form\">Postar</button>\n                </div>\n            </div>\n            <form className=\"contentPostinput\" id= \"form\" onSubmit={onSubmit}>\n               <textarea  onChange={onChange} id='inputpost' value={description} placeholder='Digite uma descrição!' />\n               <input id='inputPosts' type='file' onChange={onChangeInput} />\n    {imageUploaded ?   <div className=\"imgPostinput\">\n                    <img src={imageUploaded} alt=''></img>\n                </div> : null}\n  \n            </form>\n\n        </div>\n    </Content>\n    )\n}"]},"metadata":{},"sourceType":"module"}